(function(){"use strict";if(window.kadenceCountdown={cache:{},timers:JSON.parse(kadence_blocks_countdown.timers),listenerCache:{},sliderEventCache:{},prefersReducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,isInViewport(a){const b=a.getBoundingClientRect();return 0<=b.top&&-300<=b.left&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)+300},isInActiveSlide(a){const b=a.closest(".kb-splide, .splide");if(!b)return!0;const c=b.querySelector(".splide__slide.is-active");return!c||c.contains(a)},createCookie(a,b,c,d){if(c){const a=new Date;"minutes"==d?a.setTime(a.getTime()+1e3*(60*c)):"hours"==d?a.setTime(a.getTime()+1e3*(60*(60*c))):a.setTime(a.getTime()+1e3*(60*(60*(24*c))));var e="; expires="+a.toGMTString()}else var e="";document.cookie=kadence_blocks_countdown.site_slug+"-"+a+"="+b+e+"; path=/"},getCookie(a){const b="; "+document.cookie,c=b.split("; "+kadence_blocks_countdown.site_slug+"-"+a+"=");return 2==c.length?c.pop().split(";").shift():""},getRepeaterTimeStamp(a){const b=new Date,c=new Date(parseInt(window.kadenceCountdown.timers[a].timestamp)),d=c.getSeconds(),e=c.getMinutes(),f=c.getHours();let g=new Date;(b.getTime()-c.getTime())/86400000;let h=0;let i=c.getDate();const j=b.getDate(),k=c.getMonth(),l=11===b.getMonth()?0:j>=i?b.getMonth()+1:b.getMonth(),m=11===b.getMonth()?b.getFullYear()+1:b.getFullYear(),n=new Date(m,l+1,0).getDate();switch(window.kadenceCountdown.timers[a].frequency){case"daily":const a=new Date;a.setHours(f,e,d,0),h=b.getTime()>=a.getTime()?1:0,g.setDate(b.getDate()+h),g.setHours(f),g.setMinutes(e),g.setSeconds(d);break;case"weekly":const j=new Date;j.setHours(f,e,d,0);const o=Math.floor((b.getTime()-c.getTime())/86400000);if(b.getTime()>=j.getTime())h=7-o%7;else{const a=(b.getDay()-c.getDay()+7)%7;h=0==a?0:7-a}g.setDate(b.getDate()+h),g.setHours(f),g.setMinutes(e),g.setSeconds(d);break;case"monthly":31===i&&30===n?i=30:0===l&&29<=i&&(i=29===i?i:28),g=new Date(m,l,i,f,e,d);break;case"yearly":const p=b.getMonth()>=c.getMonth()&&b.getDate()>=c.getDate()&&b.getHours()>=f&&b.getMinutes()>=e&&b.getSeconds()>=d,q=p?b.getFullYear():b.getFullYear()+1;g=new Date(q,k,i,f,e,d);break;default:}return g.getTime()},stripHtml(a){const b=new DOMParser().parseFromString(`<pre>${a}</pre>`,"text/html");return b.body.textContent||""},createSafeElement(a,b,c){const d=document.createElement(a);return b&&(d.className=b),void 0!==c&&(d.textContent=c),d},announceToScreenReader(a){let b=document.getElementById("kb-countdown-announcements");b||(b=document.createElement("div"),b.id="kb-countdown-announcements",b.setAttribute("role","status"),b.setAttribute("aria-live","polite"),b.setAttribute("aria-atomic","true"),b.className="screen-reader-text",b.style.cssText="position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;",document.body.appendChild(b)),b.textContent="",setTimeout(()=>{b.textContent=a},100)},updateTimerInterval(a,b,c){if(this.cache[b]&&this.cache[b].paused)return;const d=new Date,e=-1*(new Date().getTimezoneOffset()/60);let f="";if("evergreen"===window.kadenceCountdown.timers[b].type){if(""!==window.kadenceCountdown.cache[b].cookie&&(f=Math.floor(window.kadenceCountdown.cache[b].cookie-d.getTime())),!f&&window.kadenceCountdown.timers[b].strict&&"query"===window.kadenceCountdown.timers[b].evergreen&&(window.kadenceCountdown.timers[b].evergreen="",window.kadenceCountdown.cache[b].request=new XMLHttpRequest,window.kadenceCountdown.cache[b].request.open("POST",kadence_blocks_countdown.ajax_url,!0),window.kadenceCountdown.cache[b].request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),window.kadenceCountdown.cache[b].request.onload=function(){200<=this.status&&400>this.status&&(window.kadenceCountdown.cache[b].evergreen=parseInt(this.response),window.kadenceCountdown.cache[b].evergreen&&(f=Math.floor(window.kadenceCountdown.cache[b].evergreen-d.getTime()),window.kadenceCountdown.createCookie(window.kadenceCountdown.timers[b].campaign_id,window.kadenceCountdown.cache[b].evergreen,30,"days"),window.kadenceCountdown.cache[b].cookie=window.kadenceCountdown.cache[b].evergreen))},window.kadenceCountdown.cache[b].request.onerror=function(){},window.kadenceCountdown.cache[b].request.send("action=kadence_get_evergreen&nonce="+kadence_blocks_countdown.ajax_nonce+"&site_slug="+kadence_blocks_countdown.site_slug+"&reset="+window.kadenceCountdown.cache[b].reset+"&countdown_id="+window.kadenceCountdown.timers[b].campaign_id)),f||window.kadenceCountdown.timers[b].strict||!window.kadenceCountdown.timers[b].evergreen||"query"===window.kadenceCountdown.timers[b].evergreen||(f=Math.floor(window.kadenceCountdown.timers[b].evergreen-d.getTime())),!f&&window.kadenceCountdown.cache[b].evergreen&&(f=Math.floor(window.kadenceCountdown.cache[b].evergreen-d.getTime())),f&&0>f){const a=new Date;a.setTime(window.kadenceCountdown.cache[b].cookie+1e3*(60*(60*(24*Math.floor(window.kadenceCountdown.cache[b].reset)))));const c=Math.floor(a.getTime()-d.getTime());0>c&&(f="")}if(!f&&(window.kadenceCountdown.timers[b].strict&&window.kadenceCountdown.cache[b].request&&window.kadenceCountdown.cache[b].request.readyState&&4===window.kadenceCountdown.cache[b].request.readyState||!window.kadenceCountdown.timers[b].strict)){const a=new Date;a.setTime(a.getTime()+1e3*(60*(60*Math.floor(window.kadenceCountdown.timers[b].hours)))),a.setTime(a.getTime()+1e3*(60*Math.floor(window.kadenceCountdown.timers[b].minutes))),window.kadenceCountdown.cache[b].evergreen=a.getTime()+100,window.kadenceCountdown.createCookie(window.kadenceCountdown.timers[b].campaign_id,window.kadenceCountdown.cache[b].evergreen,30,"days"),f=Math.floor(a.getTime()-d.getTime());const c=new XMLHttpRequest;c.open("POST",kadence_blocks_countdown.ajax_url,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.onload=function(){200<=this.status&&400>this.status},c.onerror=function(){},c.send("action=kadence_evergreen_timestamp&nonce="+kadence_blocks_countdown.ajax_nonce+"&site_slug="+kadence_blocks_countdown.site_slug+"&timestamp="+window.kadenceCountdown.cache[b].evergreen+"&countdown_id="+window.kadenceCountdown.timers[b].campaign_id)}}else f=Math.floor(window.kadenceCountdown.timers[b].timestamp-d.getTime());const g=!window.kadenceCountdown.timers[b].stopCount||!(new Date(window.kadenceCountdown.timers[b].endDate)<=new Date);if(window.kadenceCountdown.timers[b].repeat&&0>=f&&g){const a=window.kadenceCountdown.getRepeaterTimeStamp(b);f=Math.floor(a-d.getTime())}if(f&&0>f){if("redirect"===window.kadenceCountdown.timers[b].action)window.kadenceCountdown.timers[b].redirect&&(window.location.href=window.kadenceCountdown.timers[b].redirect);else if("hide"===window.kadenceCountdown.timers[b].action)window.kadenceCountdown.announceToScreenReader(wp.i18n.__("Countdown timer has ended.","kadence-blocks")),c.style.display="none";else if("message"===window.kadenceCountdown.timers[b].action){c.querySelector(".kb-countdown-inner-first")&&(c.querySelector(".kb-countdown-inner-first").style.display="none"),c.querySelector(".kb-countdown-timer")&&(c.querySelector(".kb-countdown-timer").style.display="none"),c.querySelector(".kb-countdown-inner-second")&&(c.querySelector(".kb-countdown-inner-second").style.display="none");const a=c.querySelector(".kb-countdown-inner-complete");if(a){a.style.display="block",a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true");const b=window.kadenceCountdown.stripHtml(a.textContent||a.innerText||"");b.trim()?window.kadenceCountdown.announceToScreenReader(wp.i18n.__("Countdown timer has ended.","kadence-blocks")+" "+b):window.kadenceCountdown.announceToScreenReader(wp.i18n.__("Countdown timer has ended. New content is now available.","kadence-blocks"))}c.style.opacity=1,window.kadenceCountdown.timers[b].revealOnLoad&&(c.style.height=c.scrollHeight+"px")}else{if(window.kadenceCountdown.timers[b].timer){const c=window.kadenceCountdown.timers[b].dividers,d=window.kadenceCountdown.timers[b].stopWatch,e=window.kadenceCountdown.timers[b].units,f={days:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].daysLabel),hours:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].hoursLabel),minutes:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].minutesLabel),seconds:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].secondsLabel)},g={};if(void 0===e||void 0===e[0]||void 0===e[0].days||e[0].days?(g.days=0,g.hours=0,g.minutes=0,g.seconds=0):void 0===e||void 0===e[0]||void 0===e[0].hours||e[0].hours?(g.hours=0,g.minutes=0,g.seconds=0):void 0===e||void 0===e[0]||void 0===e[0].minutes||e[0].minutes?(g.minutes=0,g.seconds=0):g.seconds=0,a.innerHTML="",window.kadenceCountdown.timers[b].preLabel){const c=this.createSafeElement("div","kb-countdown-item kb-pre-timer"),d=this.createSafeElement("span","kb-pre-timer-inner",this.stripHtml(window.kadenceCountdown.timers[b].preLabel));c.appendChild(d),a.appendChild(c)}if(Object.keys(g).forEach(b=>{const e=this.createSafeElement("div",`kb-countdown-item kb-countdown-date-item kb-countdown-date-item-${b}`),h=this.createSafeElement("span","kb-countdown-number",this.calculateNumberDesign(this.stripHtml(g[b].toString()),d));e.appendChild(h);const i=this.createSafeElement("span","kb-countdown-label",this.stripHtml(f[b]));if(e.appendChild(i),a.appendChild(e),"seconds"!==b&&c){const c=this.createSafeElement("div",`kb-countdown-item kb-countdown-date-item kb-countdown-divider-item kb-countdown-divider-item-${b}`),d=this.createSafeElement("span","kb-countdown-number",":"),e=this.createSafeElement("span","kb-countdown-label"," ");c.appendChild(d),c.appendChild(e),a.appendChild(c)}}),window.kadenceCountdown.timers[b].postLabel){const c=this.createSafeElement("div","kb-countdown-item kb-post-timer"),d=this.createSafeElement("span","kb-post-timer-inner",this.stripHtml(window.kadenceCountdown.timers[b].postLabel));c.appendChild(d),a.appendChild(c)}}c.style.opacity=1,window.kadenceCountdown.timers[b].revealOnLoad&&(c.style.height=c.scrollHeight+"px")}return void(window.kadenceCountdown.cache[b].interval&&clearInterval(window.kadenceCountdown.cache[b].interval))}if((f||0===f)&&window.kadenceCountdown.timers[b].timer){const c=window.kadenceCountdown.timers[b].dividers,d=window.kadenceCountdown.timers[b].stopWatch,e=window.kadenceCountdown.timers[b].units,g={days:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].daysLabel),hours:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].hoursLabel),minutes:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].minutesLabel),seconds:window.kadenceCountdown.stripHtml(window.kadenceCountdown.timers[b].secondsLabel)};let h=Math.floor(f/3600000%24),i=Math.floor(f/1e3/60%60),j=Math.floor(f/1e3%60);const k={};if(void 0===e||void 0===e[0]||void 0===e[0].days||e[0].days?(k.days=Math.floor(f/86400000),k.hours=h,k.minutes=i,k.seconds=j):(h=Math.floor(f/3600000),void 0===e||void 0===e[0]||void 0===e[0].hours||e[0].hours?(k.hours=h,k.minutes=i,k.seconds=j):(i=Math.floor(f/1e3/60),void 0===e||void 0===e[0]||void 0===e[0].minutes||e[0].minutes?(k.minutes=i,k.seconds=j):(j=Math.floor(f/1e3),k.seconds=j))),a.innerHTML="",window.kadenceCountdown.timers[b].preLabel){const c=this.createSafeElement("div","kb-countdown-item kb-pre-timer"),d=this.createSafeElement("span","kb-pre-timer-inner",this.stripHtml(window.kadenceCountdown.timers[b].preLabel));c.appendChild(d),a.appendChild(c)}if(Object.keys(k).forEach(b=>{const e=this.createSafeElement("div",`kb-countdown-item kb-countdown-date-item kb-countdown-date-item-${b}`),f=this.createSafeElement("span","kb-countdown-number",this.calculateNumberDesign(this.stripHtml(k[b].toString()),d));e.appendChild(f);const h=this.createSafeElement("span","kb-countdown-label",this.stripHtml(g[b]));if(e.appendChild(h),a.appendChild(e),"seconds"!==b&&c){const c=this.createSafeElement("div",`kb-countdown-item kb-countdown-date-item kb-countdown-divider-item kb-countdown-divider-item-${b}`),d=this.createSafeElement("span","kb-countdown-number",":"),e=this.createSafeElement("span","kb-countdown-label"," ");c.appendChild(d),c.appendChild(e),a.appendChild(c)}}),window.kadenceCountdown.timers[b].postLabel){const c=this.createSafeElement("div","kb-countdown-item kb-post-timer"),d=this.createSafeElement("span","kb-post-timer-inner",this.stripHtml(window.kadenceCountdown.timers[b].postLabel));c.appendChild(d),a.appendChild(c)}}if((f||0===f)&&!window.kadenceCountdown.cache[b].revealed&&(window.kadenceCountdown.cache[b].revealed=!0,c.style.opacity=1,window.kadenceCountdown.timers[b].revealOnLoad)){const a=c.closest(".kadence-pro-fixed-wrap");a&&!window.kadenceCountdown.timers[b].timer?(setTimeout(function(){c.style.height=c.scrollHeight+"px",window.kadenceCountdown.prefersReducedMotion||(a.style.transition="height 0.8s ease"),a.style.height=Math.floor(a.scrollHeight+c.scrollHeight)+"px"},200),setTimeout(function(){const b=new CustomEvent("kadence-update-sticky");window.dispatchEvent(b),a.style.transition=""},1e3)):c.style.height=c.scrollHeight+"px"}},calculateNumberDesign(a,b=!1){return b?9<a?""+a:"0"+a:a},setupSliderListeners(a,b){const c=b.closest(".kb-countdown-container"),d=c.closest(".kb-splide, .splide");if(!d)return;const e=()=>{window.kadenceCountdown.checkAndStartTimer(a,b,c)},f=()=>{window.kadenceCountdown.checkAndStartTimer(a,b,c)};d.addEventListener("splideMounted",e),d.addEventListener("splide:moved",f),window.kadenceCountdown.sliderEventCache[a]=[{element:d,event:"splideMounted",handler:e},{element:d,event:"splide:moved",handler:f}]},togglePause(a,b){if(window.kadenceCountdown.cache[a]){const c=window.kadenceCountdown.cache[a].paused||!1;if(c){window.kadenceCountdown.cache[a].paused=!1,b.setAttribute("aria-pressed","false"),b.setAttribute("aria-label",wp.i18n.__("Pause countdown timer","kadence-blocks")),b.setAttribute("title",wp.i18n.__("Pause countdown","kadence-blocks"));const c=b.querySelector(".kb-countdown-pause-icon");c&&(c.innerHTML="<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" rx=\"1\" fill=\"currentColor\" /><rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" rx=\"1\" fill=\"currentColor\" /></svg>"),b.classList.remove("kb-countdown-paused"),window.kadenceCountdown.cache[a].element&&window.kadenceCountdown.cache[a].parent&&(window.kadenceCountdown.updateTimerInterval(window.kadenceCountdown.cache[a].element,a,window.kadenceCountdown.cache[a].parent),window.kadenceCountdown.cache[a].interval=setInterval(function(){window.kadenceCountdown.updateTimerInterval(window.kadenceCountdown.cache[a].element,a,window.kadenceCountdown.cache[a].parent)},1e3))}else{window.kadenceCountdown.cache[a].paused=!0,b.setAttribute("aria-pressed","true"),b.setAttribute("aria-label",wp.i18n.__("Resume countdown timer","kadence-blocks")),b.setAttribute("title",wp.i18n.__("Resume countdown","kadence-blocks"));const c=b.querySelector(".kb-countdown-pause-icon");c&&(c.innerHTML="<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8 5v14l11-7z\" fill=\"currentColor\" /></svg>"),b.classList.add("kb-countdown-paused"),window.kadenceCountdown.cache[a].interval&&(clearInterval(window.kadenceCountdown.cache[a].interval),window.kadenceCountdown.cache[a].interval=null)}}},checkAndStartTimer(a,b,c){return"evergreen"===window.kadenceCountdown.timers[a].type?window.kadenceCountdown.prefersReducedMotion?void(window.kadenceCountdown.cache[a].started||(window.kadenceCountdown.cache[a].started=!0,window.kadenceCountdown.updateTimerInterval(b,a,c))):void(window.kadenceCountdown.cache[a]&&window.kadenceCountdown.cache[a].paused||window.kadenceCountdown.isInViewport(c)&&window.kadenceCountdown.isInActiveSlide(c)&&!window.kadenceCountdown.cache[a].started&&(window.kadenceCountdown.cache[a].started=!0,window.kadenceCountdown.updateTimerInterval(b,a,c),window.kadenceCountdown.cache[a].interval=setInterval(function(){window.kadenceCountdown.updateTimerInterval(b,a,c)},1e3),window.kadenceCountdown.listenerCache[a]&&(document.removeEventListener("scroll",window.kadenceCountdown.listenerCache[a],!1),delete window.kadenceCountdown.listenerCache[a]),window.kadenceCountdown.sliderEventCache[a]&&(window.kadenceCountdown.sliderEventCache[a].forEach(a=>{a.element.removeEventListener(a.event,a.handler)}),delete window.kadenceCountdown.sliderEventCache[a]))):void 0},updateTimer(a,b,c){window.kadenceCountdown.cache[b]={},window.kadenceCountdown.cache[b].evergreen="",window.kadenceCountdown.cache[b].request="",window.kadenceCountdown.cache[b].revealed=!1,window.kadenceCountdown.cache[b].cookie="",window.kadenceCountdown.cache[b].started=!1,window.kadenceCountdown.cache[b].paused=!1,window.kadenceCountdown.cache[b].element=a,window.kadenceCountdown.cache[b].parent=c,a&&(a.setAttribute("role","timer"),a.setAttribute("aria-live","polite")),"evergreen"===window.kadenceCountdown.timers[b].type&&window.kadenceCountdown.timers[b].campaign_id&&(window.kadenceCountdown.cache[b].cookie=window.kadenceCountdown.getCookie(window.kadenceCountdown.timers[b].campaign_id)),window.kadenceCountdown.updateTimerInterval(a,b,c);const d=c.querySelector(".kb-countdown-pause-button");if(d){const a=d.cloneNode(!0);if(d.parentNode.replaceChild(a,d),window.kadenceCountdown.prefersReducedMotion){window.kadenceCountdown.cache[b].paused=!0,a.setAttribute("aria-pressed","true"),a.setAttribute("aria-label",wp.i18n.__("Resume countdown timer","kadence-blocks")),a.setAttribute("title",wp.i18n.__("Resume countdown","kadence-blocks"));const c=a.querySelector(".kb-countdown-pause-icon");c&&(c.innerHTML="<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8 5v14l11-7z\" fill=\"currentColor\" /></svg>"),a.classList.add("kb-countdown-paused")}a.addEventListener("click",c=>{c.preventDefault(),window.kadenceCountdown.togglePause(b,a)}),a.addEventListener("keydown",c=>{("Enter"===c.key||" "===c.key)&&(c.preventDefault(),window.kadenceCountdown.togglePause(b,a))})}window.kadenceCountdown.prefersReducedMotion||("evergreen"===window.kadenceCountdown.timers[b].type?(window.kadenceCountdown.listenerCache[b]=function(){window.kadenceCountdown.checkAndStartTimer(b,a,c)},document.addEventListener("scroll",window.kadenceCountdown.listenerCache[b],{passive:!0}),window.kadenceCountdown.setupSliderListeners(b,a),window.kadenceCountdown.checkAndStartTimer(b,a,c)):(window.kadenceCountdown.updateTimerInterval(a,b,c),window.kadenceCountdown.cache[b].interval=setInterval(function(){window.kadenceCountdown.updateTimerInterval(a,b,c)},1e3)))},initTimer(){const a=document.querySelectorAll(".kb-countdown-container");if(a.length)for(let b=0;b<a.length;b++){const c=a[b].getAttribute("data-id");if(c&&window.kadenceCountdown.timers[c]){const d=a[b].querySelector(".kb-countdown-timer");window.kadenceCountdown.updateTimer(d,c,a[b])}}}},window.matchMedia){const a=window.matchMedia("(prefers-reduced-motion: reduce)"),b=a=>{const b=window.kadenceCountdown.prefersReducedMotion;window.kadenceCountdown.prefersReducedMotion=a.matches,b!==a.matches&&window.kadenceCountdown.initTimer()};a.addEventListener?a.addEventListener("change",b):a.addListener(b)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",window.kadenceCountdown.initTimer):window.kadenceCountdown.initTimer()})();